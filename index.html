<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestão de Almoxarifado</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <h1>Gestão de Almoxarifado</h1>

  <div class="tab-container">
    <div class="tabs">
      <button class="tab-btn active" onclick="openTab(event, 'tab-entrada')">1° Entrada</button>
      <button class="tab-btn" onclick="openTab(event, 'tab-saida')">2° Saída</button>
      <button class="tab-btn" onclick="openTab(event, 'tab-retorno')">3° Retorno</button>
      <button class="tab-btn" onclick="openTab(event, 'tab-estoque')">4° Estoque</button>
      <button class="tab-btn" onclick="openTab(event, 'tab-historico')">5° Histórico</button>
    </div>

    <!-- 1° ABA PARA entrada -->
    <div id="tab-entrada" class="tab-content active">
      <section class="section-entrada">
        <h2>Entrada de Produto Novo</h2>
        <div class="form-group">
          <label for="entradaNome">Nome do Produto</label>
          <input type="text" id="entradaNome" placeholder="Ex: Caneta Azul">
          <label for="entradaQtd">Quantidade</label>
          <input type="number" id="entradaQtd" placeholder="Quantidade" min="1">
          <label for="entradaPessoa">Responsável pela entrada</label>
          <input type="text" id="entradaPessoa" placeholder="Seu nome">
          <button onclick="adicionarItem()" class="btn-entrada">Confirmar Entrada</button>
          <div id="msgEntrada" class="msg-container"></div>
        </div>
      </section>
    </div>

    <!-- 2° aba para saída -->
    <div id="tab-saida" class="tab-content">
      <section class="section-saida">
        <h2>Saída de Item (Controle de Retirada)</h2>
        <div class="form-group">
          <label for="saidaNome">Selecionar Item</label>
          <select id="saidaNome" onchange="atualizarQtdDisponivelSaida()">
            <option value="">Selecione um item...</option>
          </select>
          <div id="qtdDisponivel" class="info-text"></div>
          
          <label for="saidaQtd">Quantidade</label>
          <input type="number" id="saidaQtd" placeholder="Quantidade" min="1">
          
          <label for="saidaPessoa">Quem está retirando?</label>
          <input type="text" id="saidaPessoa" placeholder="Nome do colaborador">
          
          <label for="saidaLocal">Para qual local?</label>
          <input type="text" id="saidaLocal" placeholder="Ex: Sala 01, Departamento, etc.">
          
          <button onclick="removerItem()" class="btn-saida">Confirmar Saída</button>
          <div id="msgSaida" class="msg-container"></div>
        </div>
      </section>
    </div>

    <!-- 3° aba para retorna o item ao estoque -->
    <div id="tab-retorno" class="tab-content">
      <section class="section-retorno">
        <h2>Retorno ao Estoque</h2>
        <div class="form-group">
          <label for="retornoNome">Produto que está retornando</label>
          <select id="retornoNome">
            <option value="">Selecione um item...</option>
          </select>
          
          <label for="retornoQtd">Quantidade</label>
          <input type="number" id="retornoQtd" placeholder="Quantidade" min="1">
          
          <label for="retornoPessoa">Quem está devolvendo?</label>
          <input type="text" id="retornoPessoa" placeholder="Nome do colaborador">
          
          <button onclick="retornarItem()" class="btn-retorno">Confirmar Retorno</button>
          <div id="msgRetorno" class="msg-container"></div>
        </div>
      </section>
    </div>

    <!-- 4° ABA PARA SABER OQUE TEM EM ESTOQUE -->
    <div id="tab-estoque" class="tab-content">
      <section class="section-estoque">
        <h2>Items em Estoque</h2>
        <div class="estoque-actions">
          <button class="btn-clear" onclick="limparEstoque()">Limpar estoque</button>
          <div id="msgEstoque" class="msg-container"></div>
        </div>
        <div class="search-bar">
          <input type="text" id="pesquisa" placeholder="🔍 Pesquisar no estoque..." onkeyup="filtrarEstoque()">
        </div>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Item</th>
                <th>Quantidade Atual</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody id="tabelaEstoque"></tbody>
          </table>
        </div>
        <div class="pagination" id="paginacaoEstoque">
          <button onclick="paginaAnteriorEstoque()" id="btnAnteriorEstoque">Anterior</button>
          <span id="paginaIndicadorEstoque">Página 1</span>
          <button onclick="proximaPaginaEstoque()" id="btnProximaEstoque">Próxima</button>
        </div>
      </section>
    </div>

    <!-- 5° ABA PARA HISTÓRICO -->
    <div id="tab-historico" class="tab-content">
      <section class="section-historico">
        <h2>Histórico de Movimentações</h2>
        <div class="historico-actions">
          <button class="btn-clear" onclick="limparHistorico()">Limpar histórico</button>
          <div id="msgHistorico" class="msg-container"></div>
        </div>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Tipo</th>
                <th>Item</th>
                <th>Qtd</th>
                <th>Responsável</th>
                <th>Data/Hora</th>
              </tr>
            </thead>
            <tbody id="tabelaHistorico"></tbody>
          </table>
        </div>
        <div class="pagination" id="paginacaoHistorico">
          <button onclick="paginaAnterior()" id="btnAnterior">Anterior</button>
          <span id="paginaIndicador">Página 1</span>
          <button onclick="proximaPagina()" id="btnProxima">Próxima</button>
        </div>
      </section>
    </div>
  </div>

  <!-- Modal de Senha -->
  <div id="modalSenha" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Verificação de Segurança</h3>
        <button class="modal-close" onclick="fecharModalSenha()">&times;</button>
      </div>
      <div class="modal-body">
        <p id="modalMsg">Digite a senha para continuar</p>
        <input type="password" id="senhaInput" placeholder="Digite a senha" onkeypress="if(event.key === 'Enter') confirmarSenha()">
      </div>
      <div class="modal-footer">
        <button class="btn-modal-cancel" onclick="fecharModalSenha()">Cancelar</button>
        <button class="btn-modal-confirm" onclick="confirmarSenha()">Confirmar</button>
      </div>
    </div>
  </div>

  <!-- Modal de Edição de Item do Estoque -->
  <div id="modalEditarItem" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modalEditarTitle">Editar Item</h3>
        <button class="modal-close" onclick="fecharModalEditarItem()">&times;</button>
      </div>
      <div class="modal-body">
        <p id="modalEditarItemName" style="margin-bottom: 20px; color: #64b5f6; font-weight: 600;"></p>
        <div style="display: flex; flex-direction: column; gap: 15px;">
          <div>
            <label style="color: #90caf9; margin-bottom: 8px; display: block; font-weight: 500;">Quantidade atual:</label>
            <p id="modalEditarQtdAtual" style="color: #e0e0e0; font-weight: 600; margin: 0;">0</p>
          </div>
          <div>
            <label for="modalEditarQtd" style="color: #90caf9; margin-bottom: 8px; display: block; font-weight: 500;">Quantidade a adicionar/remover:</label>
            <input type="number" id="modalEditarQtd" placeholder="Quantidade" min="1" style="width: 100%; padding: 10px; border: 1px solid #2d5a8c; border-radius: 8px; background: #0d1b2a; color: #e0e0e0; font-size: 14px; box-sizing: border-box;">
          </div>
        </div>
      </div>
      <div class="modal-footer" style="justify-content: space-between;">
        <button class="btn-modal-danger" onclick="deletarItemEstoque()">Deletar Item</button>
        <div style="display: flex; gap: 10px;">
          <button class="btn-modal-cancel" onclick="fecharModalEditarItem()">Cancelar</button>
          <button class="btn-modal-info" onclick="adicionarQuantidadeItem()">+ Adicionar</button>
          <button class="btn-modal-warn" onclick="removerQuantidadeItem()">- Retirar</button>
        </div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
